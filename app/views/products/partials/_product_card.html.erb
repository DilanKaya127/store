<% if @products && @products.any? %>
    <div class="products-grid" id="products">
        <% @products.each do |product| %>
            <div class="product-card" onclick="window.location.href='<%= product_path(product.id) %>'">
                <% if product.featured_image.present? %>
                    <%= image_tag product.featured_image.attached? ? product.featured_image : "https://via.placeholder.com/300x200/E5E7EB/6B7280?text=No+Image", 
                        alt: product.product_name, 
                        class: "product-image" %>
                <% else %>
                    <%= image_tag "https://via.placeholder.com/300x200/E5E7EB/6B7280?text=No+Image", 
                    alt: "Resim yok", 
                    class: "product-image" %>
                <% end %>
                        
                <div class="product-info">
                    <h3 class="product-name"><%= product.product_name %></h3>
                    <div class="product-price">
                        <%= number_to_currency(product.unit_price, unit: "₺", separator: ",", delimiter: ".") %>
                    </div>
                            
                    <% stock_count = product.units_in_stock || 0 %>
                    <% if stock_count > 10 %>
                        <span class="product-stock in-stock"><%= stock_count %> adet stokta</span>
                    <% elsif stock_count > 0 %>
                        <span class="product-stock low-stock"><%= stock_count %> adet stokta</span>
                    <% else %>
                        <span class="product-stock out-of-stock">Stokta yok</span>
                    <% end %>
                </div>
            </div>
        <% end %>
    </div>
    <!-- Pagination (Sayfalama) -->
    <div class="pagination-wrapper">
        <%= paginate @products %>
    </div>
<% else %>
    <!-- Boş Durum -->
    <div class="no-products">
        <h3>Ürün bulunamadı</h3>
        <p>Aradığınız kriterlere uygun ürün bulunmamaktadır.</p>
        <%= link_to "Tüm ürünleri görüntüle", products_path, class: "btn" %>
    </div>
<% end %>

<script>
    // Ürün kartlarına hover efekti için ek JavaScript
    document.querySelectorAll('.product-card').forEach(function(card) {
        card.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-5px)';
        });
        
        card.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0)';
        });
    });
</script>